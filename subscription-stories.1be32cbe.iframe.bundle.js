"use strict";(self.webpackChunkzod2gql=self.webpackChunkzod2gql||[]).push([[860],{"./src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Hh:()=>formatVariablesDeclaration,Jf:()=>getOperationFieldName,Nt:()=>GQLType,ON:()=>formatFieldArguments,fO:()=>processFields});var zod__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/zod/lib/index.mjs"),_mutation__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/mutation.ts"),_query__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/query.ts"),_subscription__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/subscription.ts"),GQLType=function(GQLType){return GQLType.Query="query",GQLType.Mutation="mutation",GQLType.Subscription="subscription",GQLType}({});const getOperationFieldName=(schema,operationName,isArray=!1)=>{let fieldName="";if(operationName){fieldName=operationName;const prefixes=["Get","Create","Update","Delete","Subscribe"];for(const prefix of prefixes)if(fieldName.startsWith(prefix)){fieldName=fieldName.substring(prefix.length);break}fieldName=fieldName.charAt(0).toLowerCase()+fieldName.slice(1)}else if(schema instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodArray){const elementSchema=schema._def.type;elementSchema instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodObject&&(fieldName=getOperationFieldName(elementSchema),isArray=!0)}else if(schema instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodObject)if(schema.description)fieldName=schema.description.charAt(0).toLowerCase()+schema.description.slice(1);else{const typeName=schema._def.typeName||"";typeName&&"ZodObject"!==typeName&&(fieldName=typeName.charAt(0).toLowerCase()+typeName.slice(1))}return isArray?(word=fieldName)?word.endsWith("y")?word.slice(0,-1)+"ies":word.endsWith("s")||word.endsWith("x")||word.endsWith("ch")||word.endsWith("sh")?word+"es":word+"s":"":fieldName;var word},formatVariablesDeclaration=(variables,inputTypeMap)=>variables&&0!==Object.keys(variables).length?`(${Object.entries(variables).map((([key,value])=>{if(inputTypeMap&&inputTypeMap[key])return`$${key}: ${inputTypeMap[key]}!`;const inferType=val=>{if(null===val)return"String";if(Array.isArray(val)){return`[${val.length>0?inferType(val[0]):"String"}]`}switch(typeof val){case"number":return Number.isInteger(val)?"Int":"Float";case"boolean":return"Boolean";case"object":return`${key.charAt(0).toUpperCase()+key.slice(1)}Input`;default:return"String"}};return`$${key}: ${inferType(value)}!`})).join(", ")})`:"",formatFieldArguments=variables=>variables&&0!==Object.keys(variables).length?`(${Object.entries(variables).map((([key])=>`${key}: $${key}`)).join(", ")})`:"",processFields=(schema,queryType,options={},depth=0)=>{const{maxDepth=10}=options;if(depth>maxDepth)return"";const indent="  ".repeat(depth);let query="";const shape=schema._def.shape();for(const[key,value]of Object.entries(shape)){const processSchema=(schema,fieldName)=>{const unwrappedSchema=schema instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodOptional||schema instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodNullable?schema._def.innerType:schema;if(unwrappedSchema instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodObject)query+=`${indent}${fieldName} {\n${processFields(unwrappedSchema,queryType,options,depth+1)}${indent}}\n`;else if(unwrappedSchema instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodArray){const elementType=unwrappedSchema._def.type;elementType instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodObject?query+=`${indent}${fieldName} {\n${processFields(elementType,queryType,options,depth+1)}${indent}}\n`:query+=`${indent}${fieldName}\n`}else query+=`${indent}${fieldName}\n`};value instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodType?processSchema(value,key):query+=`${indent}${key}\n`}return query};zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodObject.prototype.toGQL=function(queryType="query",options={},depth=0){if(depth>0)return processFields(this,queryType,options,depth);switch(queryType){case"query":return(0,_query__WEBPACK_IMPORTED_MODULE_1__.O)(this,options);case"mutation":return(0,_mutation__WEBPACK_IMPORTED_MODULE_0__.n)(this,options);case"subscription":return(0,_subscription__WEBPACK_IMPORTED_MODULE_2__.d)(this,options);default:return""}},zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodArray.prototype.toGQL=function(queryType="query",options={},depth=0){if(depth>0)return"";if(!(this._def.type instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodObject))throw new Error("Array element must be a ZodObject for toGQL");switch(queryType){case"query":return function processArrayQuery(schema,options={}){const{operationName,variables,maxDepth=10}=options,elementSchema=schema._def.type;if(!(elementSchema instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodObject))throw new Error("Array element must be a ZodObject");const operation=operationName?` ${operationName}`:"",varsString=formatVariablesDeclaration(variables,options.inputTypeMap),fieldArgs=formatFieldArguments(variables);return`query${operation}${varsString} {\n  ${getOperationFieldName(schema,operationName)}${fieldArgs} {\n${processFields(elementSchema,"query",options,2)}  }\n}`}(this,options);case"mutation":return function processArrayMutation(schema,options={}){const{operationName,variables,maxDepth=10}=options,elementSchema=schema._def.type;if(!(elementSchema instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodObject))throw new Error("Array element must be a ZodObject");const operation=operationName?` ${operationName}`:"",varsString=formatVariablesDeclaration(variables,options.inputTypeMap),fieldArgs=formatFieldArguments(variables);return`mutation${operation}${varsString} {\n  ${getOperationFieldName(schema,operationName)}${fieldArgs} {\n${processFields(elementSchema,"mutation",options,2)}  }\n}`}(this,options);case"subscription":return function processArraySubscription(schema,options={}){const{operationName,variables,maxDepth=10}=options,elementSchema=schema._def.type;if(!(elementSchema instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodObject))throw new Error("Array element must be a ZodObject");const operation=operationName?` ${operationName}`:"",varsString=formatVariablesDeclaration(variables,options.inputTypeMap),fieldArgs=formatFieldArguments(variables);return`subscription${operation}${varsString} {\n  ${getOperationFieldName(schema,operationName)}${fieldArgs} {\n${processFields(elementSchema,"subscription",options,2)}  }\n}`}(this,options);default:return""}}},"./src/mutation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>createMutation,n:()=>processMutation});var _index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/index.ts");function processMutation(schema,options={}){const{operationName,variables,maxDepth=10,inputTypeMap}=options,operation=operationName?` ${operationName}`:"",varsString=((variables,inputTypeMap)=>variables&&0!==Object.keys(variables).length?`(${Object.entries(variables).map((([key,value])=>{if(inputTypeMap&&inputTypeMap[key])return`$${key}: ${inputTypeMap[key]}!`;let type="String";return"number"==typeof value?type="Int":"boolean"==typeof value?type="Boolean":"object"==typeof value&&null!==value&&(type=`${key.charAt(0).toUpperCase()+key.slice(1)}Input`),`$${key}: ${type}!`})).join(", ")})`:"")(variables,inputTypeMap),fieldArgs=(0,_index__WEBPACK_IMPORTED_MODULE_0__.ON)(variables),mutationField=(0,_index__WEBPACK_IMPORTED_MODULE_0__.Jf)(schema,operationName);return`${_index__WEBPACK_IMPORTED_MODULE_0__.Nt.Mutation}${operation}${varsString} {\n  ${mutationField}${fieldArgs} {\n${(0,_index__WEBPACK_IMPORTED_MODULE_0__.fO)(schema,_index__WEBPACK_IMPORTED_MODULE_0__.Nt.Mutation,options,2)}  }\n}`}function createMutation(schema,options={}){return schema.toGQL(_index__WEBPACK_IMPORTED_MODULE_0__.Nt.Mutation,options)}},"./src/query.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>processQuery,V:()=>createQuery});var _index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/index.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");function processQuery(schema,options={}){const{operationName,variables,maxDepth=10}=options,operation=operationName?` ${operationName}`:"",varsString=(0,_index__WEBPACK_IMPORTED_MODULE_0__.Hh)(variables,options.inputTypeMap),fieldArgs=(0,_index__WEBPACK_IMPORTED_MODULE_0__.ON)(variables),queryField=(0,_index__WEBPACK_IMPORTED_MODULE_0__.Jf)(schema,operationName);return console.log(operation,varsString,fieldArgs,queryField),`${_index__WEBPACK_IMPORTED_MODULE_0__.Nt.Query}${operation}${varsString} {\n  ${queryField}${fieldArgs} {\n${(0,_index__WEBPACK_IMPORTED_MODULE_0__.fO)(schema,_index__WEBPACK_IMPORTED_MODULE_0__.Nt.Query,options,2)}  }\n}`}function createQuery(schema,options={}){return schema.toGQL(_index__WEBPACK_IMPORTED_MODULE_0__.Nt.Query,options)}},"./src/subscription.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ActivityEventsSubscription:()=>ActivityEventsSubscription,ChatMessagesSubscription:()=>ChatMessagesSubscription,ChatRoomMessagesSubscription:()=>ChatRoomMessagesSubscription,CommentEventsSubscription:()=>CommentEventsSubscription,InferredSubscriptionOperation:()=>InferredSubscriptionOperation,LimitedDepthSubscription:()=>LimitedDepthSubscription,MultipleSubscriptions:()=>MultipleSubscriptions,NotificationsSubscription:()=>NotificationsSubscription,SensorDataSubscription:()=>SensorDataSubscription,StockTickerSubscription:()=>StockTickerSubscription,StockTickersSubscription:()=>StockTickersSubscription,SubscribeUsersPresence:()=>SubscribeUsersPresence,UserNotificationsSubscription:()=>UserNotificationsSubscription,UserPresenceSubscription:()=>UserPresenceSubscription,UsersPresenceSubscription:()=>UsersPresenceSubscription,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_storybook_test__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/test/dist/index.mjs"),zod__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./node_modules/zod/lib/index.mjs")),_index__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/index.ts"),_subscription__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/subscription.ts");const __WEBPACK_DEFAULT_EXPORT__={title:"GraphQL/Subscription",component:({schema,options,expectedOutput})=>{const subscription="function"==typeof schema.toGQL?schema.toGQL(_index__WEBPACK_IMPORTED_MODULE_3__.Nt.Subscription,options):(0,_subscription__WEBPACK_IMPORTED_MODULE_4__.K)(schema,options);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{children:"Generated GraphQL Subscription"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("pre",{"data-testid":"subscription-output",children:subscription}),expectedOutput&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{children:"Expected Output"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("pre",{"data-testid":"expected-output",children:expectedOutput})]})]})},parameters:{docs:{description:{component:"Generate GraphQL subscriptions from Zod schemas. See the [Subscriptions documentation](/?path=/docs/documentation-subscriptions--docs) for more details."},source:{type:"dynamic",excludeDecorators:!0}}}},userPresenceSchema=zod__WEBPACK_IMPORTED_MODULE_5__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),name:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),avatarUrl:zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),status:zod__WEBPACK_IMPORTED_MODULE_5__.z.enum(["online","away","offline"]),lastSeen:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),typing:zod__WEBPACK_IMPORTED_MODULE_5__.z.boolean().optional(),currentRoomId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional()}).describe("UserPresence"),notificationSchema=zod__WEBPACK_IMPORTED_MODULE_5__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),type:zod__WEBPACK_IMPORTED_MODULE_5__.z.enum(["info","success","warning","error"]),title:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),message:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),timestamp:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),read:zod__WEBPACK_IMPORTED_MODULE_5__.z.boolean(),userId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string()}).describe("Notification"),messageAuthorSchema=zod__WEBPACK_IMPORTED_MODULE_5__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),name:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),avatarUrl:zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional()}).describe("MessageAuthor"),chatAttachmentSchema=zod__WEBPACK_IMPORTED_MODULE_5__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),url:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),fileName:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),fileType:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),fileSize:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),thumbnailUrl:zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional()}).describe("ChatAttachment"),chatMessageSchema=zod__WEBPACK_IMPORTED_MODULE_5__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),content:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),author:messageAuthorSchema,timestamp:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),roomId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),edited:zod__WEBPACK_IMPORTED_MODULE_5__.z.boolean().default(!1),reactions:zod__WEBPACK_IMPORTED_MODULE_5__.z.record(zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),zod__WEBPACK_IMPORTED_MODULE_5__.z.number()).optional(),attachments:zod__WEBPACK_IMPORTED_MODULE_5__.z.array(chatAttachmentSchema).optional(),mentions:zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.string()).optional()}).describe("ChatMessage"),activityEventSchema=zod__WEBPACK_IMPORTED_MODULE_5__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),userId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),eventType:zod__WEBPACK_IMPORTED_MODULE_5__.z.enum(["page_view","button_click","form_submit","error"]),resourceId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),resourceType:zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),timestamp:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),metadata:zod__WEBPACK_IMPORTED_MODULE_5__.z.record(zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),zod__WEBPACK_IMPORTED_MODULE_5__.z.union([zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),zod__WEBPACK_IMPORTED_MODULE_5__.z.boolean()])).optional(),ipAddress:zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),userAgent:zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),sessionId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string()}).describe("ActivityEvent"),stockTickerSchema=zod__WEBPACK_IMPORTED_MODULE_5__.z.object({symbol:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),price:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),change:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),changePercent:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),volume:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),timestamp:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),open:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),high:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),low:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),previousClose:zod__WEBPACK_IMPORTED_MODULE_5__.z.number()}).describe("StockTicker"),sensorDataSchema=zod__WEBPACK_IMPORTED_MODULE_5__.z.object({sensorId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),deviceId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),type:zod__WEBPACK_IMPORTED_MODULE_5__.z.enum(["temperature","humidity","pressure","light","motion"]),value:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),unit:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),timestamp:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),batteryLevel:zod__WEBPACK_IMPORTED_MODULE_5__.z.number().optional(),status:zod__WEBPACK_IMPORTED_MODULE_5__.z.enum(["normal","warning","alert","error"]).optional(),location:zod__WEBPACK_IMPORTED_MODULE_5__.z.object({latitude:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),longitude:zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),altitude:zod__WEBPACK_IMPORTED_MODULE_5__.z.number().optional()}).optional()}).describe("SensorData"),commentReactionSchema=zod__WEBPACK_IMPORTED_MODULE_5__.z.object({userId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),reactionType:zod__WEBPACK_IMPORTED_MODULE_5__.z.enum(["like","love","laugh","wow","sad","angry"]),timestamp:zod__WEBPACK_IMPORTED_MODULE_5__.z.string()}).describe("CommentReaction"),commentEventSchema=zod__WEBPACK_IMPORTED_MODULE_5__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),postId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),eventType:zod__WEBPACK_IMPORTED_MODULE_5__.z.enum(["created","updated","deleted","reaction_added","reaction_removed"]),timestamp:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),actor:userPresenceSchema,comment:zod__WEBPACK_IMPORTED_MODULE_5__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),content:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),parentId:zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),author:messageAuthorSchema,createdAt:zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),updatedAt:zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),reactions:zod__WEBPACK_IMPORTED_MODULE_5__.z.record(zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),zod__WEBPACK_IMPORTED_MODULE_5__.z.array(commentReactionSchema)).optional(),attachments:zod__WEBPACK_IMPORTED_MODULE_5__.z.array(chatAttachmentSchema).optional(),mentions:zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.string()).optional()}).optional().describe("Comment"),reaction:commentReactionSchema.optional()}).describe("CommentEvent"),UserPresenceSubscription={args:{schema:userPresenceSchema,options:{operationName:"SubscribeUserPresence",variables:{userId:"user123"}},expectedOutput:"subscription SubscribeUserPresence($userId: String!) {\n  userPresence(userId: $userId) {\n    id\n    name\n    avatarUrl\n    status\n    lastSeen\n    typing\n    currentRoomId\n  }\n}"},parameters:{docs:{description:{story:"A GraphQL subscription to track user presence status changes in real-time."},source:{type:"code"}}},play:async({canvasElement})=>{const canvas=(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.ux)(canvasElement),subscriptionOutput=canvas.getByTestId("subscription-output"),expectedOutput=canvas.getByTestId("expected-output"),normalizeString=str=>str.replace(/\s+/g,"");(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(normalizeString(subscriptionOutput.textContent||"")).toBe(normalizeString(expectedOutput.textContent||""))}},UsersPresenceSubscription={args:{schema:zod__WEBPACK_IMPORTED_MODULE_5__.z.array(userPresenceSchema),options:{variables:{roomId:"room123"}},expectedOutput:"subscription($roomId: String!) {\n  userPresences(roomId: $roomId) {\n    id\n    name\n    avatarUrl\n    status\n    lastSeen\n    typing\n    currentRoomId\n  }\n}"},parameters:{docs:{description:{story:"A subscription using array schema for automatic pluralization of the field name."},source:{type:"code"}}}},SubscribeUsersPresence={args:{schema:zod__WEBPACK_IMPORTED_MODULE_5__.z.array(userPresenceSchema),options:{operationName:"SubscribeRoomUsers",variables:{roomId:"room123"}},expectedOutput:"subscription SubscribeRoomUsers($roomId: String!) {\n  userPresences(roomId: $roomId) {\n    id\n    name\n    avatarUrl\n    status\n    lastSeen\n    typing\n    currentRoomId\n  }\n}"},parameters:{docs:{description:{story:"An array subscription with explicit operation name and automatic field name pluralization."},source:{type:"code"}}}},UserNotificationsSubscription={args:{schema:notificationSchema,options:{operationName:"SubscribeUserNotifications",variables:{userId:"user123"}},expectedOutput:"subscription SubscribeUserNotifications($userId: String!) {\n  notification(userId: $userId) {\n    id\n    type\n    title\n    message\n    timestamp\n    read\n    userId\n  }\n}"}},NotificationsSubscription={args:{schema:zod__WEBPACK_IMPORTED_MODULE_5__.z.array(notificationSchema),options:{variables:{userId:"user123"}},expectedOutput:"subscription($userId: String!) {\n  notifications(userId: $userId) {\n    id\n    type\n    title\n    message\n    timestamp\n    read\n    userId\n  }\n}"}},ChatRoomMessagesSubscription={args:{schema:chatMessageSchema,options:{operationName:"SubscribeChatRoom",variables:{roomId:"room123"}},expectedOutput:"subscription SubscribeChatRoom($roomId: String!) {\n  chatMessage(roomId: $roomId) {\n    id\n    content\n    author {\n      id\n      name\n      avatarUrl\n    }\n    timestamp\n    roomId\n    edited\n    reactions\n    attachments {\n      id\n      url\n      fileName\n      fileType\n      fileSize\n      thumbnailUrl\n    }\n    mentions\n  }\n}"},parameters:{docs:{description:{story:"A GraphQL subscription for real-time chat messages with nested author details and message attachments."},source:{type:"code"}}}},ChatMessagesSubscription={args:{schema:zod__WEBPACK_IMPORTED_MODULE_5__.z.array(chatMessageSchema),options:{variables:{roomId:"room123"}},expectedOutput:"subscription($roomId: String!) {\n  chatMessages(roomId: $roomId) {\n    id\n    content\n    author {\n      id\n      name\n      avatarUrl\n    }\n    timestamp\n    roomId\n    edited\n    reactions\n    attachments {\n      id\n      url\n      fileName\n      fileType\n      fileSize\n      thumbnailUrl\n    }\n    mentions\n  }\n}"}},ActivityEventsSubscription={args:{schema:activityEventSchema,options:{operationName:"SubscribeActivityEvents",variables:{userId:"user123",sessionId:"session456"}},expectedOutput:"subscription SubscribeActivityEvents($userId: String!, $sessionId: String!) {\n  activityEvent(userId: $userId, sessionId: $sessionId) {\n    id\n    userId\n    eventType\n    resourceId\n    resourceType\n    timestamp\n    metadata\n    ipAddress\n    userAgent\n    sessionId\n  }\n}"}},StockTickerSubscription={args:{schema:stockTickerSchema,options:{operationName:"SubscribeStockTicker",variables:{symbols:["AAPL","MSFT","GOOGL"]}},expectedOutput:"subscription SubscribeStockTicker($symbols: StringInput!) {\n  stockTicker(symbols: $symbols) {\n    symbol\n    price\n    change\n    changePercent\n    volume\n    timestamp\n    open\n    high\n    low\n    previousClose\n  }\n}"}},StockTickersSubscription={args:{schema:zod__WEBPACK_IMPORTED_MODULE_5__.z.array(stockTickerSchema),options:{variables:{symbols:["AAPL","MSFT","GOOGL"]}},expectedOutput:"subscription($symbols: StringInput!) {\n  stockTickers(symbols: $symbols) {\n    symbol\n    price\n    change\n    changePercent\n    volume\n    timestamp\n    open\n    high\n    low\n    previousClose\n  }\n}"}},SensorDataSubscription={args:{schema:sensorDataSchema,options:{operationName:"SubscribeSensorData",variables:{deviceId:"device123",sensorTypes:["temperature","humidity"]}},expectedOutput:"subscription SubscribeSensorData($deviceId: String!, $sensorTypes: SensorTypesInput!) {\n  sensorData(deviceId: $deviceId, sensorTypes: $sensorTypes) {\n    sensorId\n    deviceId\n    type\n    value\n    unit\n    timestamp\n    batteryLevel\n    status\n    location {\n      latitude\n      longitude\n      altitude\n    }\n  }\n}"}},CommentEventsSubscription={args:{schema:commentEventSchema,options:{operationName:"SubscribeCommentEvents",variables:{postId:"post123"}}}},InferredSubscriptionOperation={args:{schema:userPresenceSchema,options:{variables:{userId:"user123"}},expectedOutput:"subscription($userId: String!) {\n  userPresence(userId: $userId) {\n    id\n    name\n    avatarUrl\n    status\n    lastSeen\n    typing\n    currentRoomId\n  }\n}"}},LimitedDepthSubscription={args:{schema:commentEventSchema,options:{operationName:"SubscribeCommentEvents",variables:{postId:"post123"},maxDepth:3},expectedOutput:"subscription SubscribeCommentEvents($postId: String!) {\n  commentEvent(postId: $postId) {\n    id\n    postId\n    eventType\n    timestamp\n    actor {\n      id\n      name\n      avatarUrl\n      status\n      lastSeen\n      typing\n      currentRoomId\n    }\n    comment {\n      id\n      content\n      parentId\n      author {\n        id\n        name\n        avatarUrl\n      }\n      createdAt\n      updatedAt\n      reactions\n      attachments\n      mentions\n    }\n    reaction {\n      userId\n      reactionType\n      timestamp\n    }\n  }\n}"}},MultipleSubscriptions={args:{schema:zod__WEBPACK_IMPORTED_MODULE_5__.z.object({userPresence:userPresenceSchema,notifications:notificationSchema,chatMessages:chatMessageSchema}).describe("CombinedSubscription"),options:{operationName:"MultiSubscription",variables:{userId:"user123",roomId:"room456"}},expectedOutput:"subscription MultiSubscription($userId: String!, $roomId: String!) {\n  combinedSubscription(userId: $userId, roomId: $roomId) {\n    userPresence {\n      id\n      name\n      avatarUrl\n      status\n      lastSeen\n      typing\n      currentRoomId\n    }\n    notifications {\n      id\n      type\n      title\n      message\n      timestamp\n      read\n      userId\n    }\n    chatMessages {\n      id\n      content\n      author {\n        id\n        name\n        avatarUrl\n      }\n      timestamp\n      roomId\n      edited\n      reactions\n      attachments {\n        id\n        url\n        fileName\n        fileType\n        fileSize\n        thumbnailUrl\n      }\n      mentions\n    }\n  }\n}"}},__namedExportsOrder=["UserPresenceSubscription","UsersPresenceSubscription","SubscribeUsersPresence","UserNotificationsSubscription","NotificationsSubscription","ChatRoomMessagesSubscription","ChatMessagesSubscription","ActivityEventsSubscription","StockTickerSubscription","StockTickersSubscription","SensorDataSubscription","CommentEventsSubscription","InferredSubscriptionOperation","LimitedDepthSubscription","MultipleSubscriptions"];UserPresenceSubscription.parameters={...UserPresenceSubscription.parameters,docs:{...UserPresenceSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: userPresenceSchema,\n    options: {\n      operationName: 'SubscribeUserPresence',\n      variables: {\n        userId: 'user123'\n      }\n    },\n    expectedOutput: `subscription SubscribeUserPresence($userId: String!) {\n  userPresence(userId: $userId) {\n    id\n    name\n    avatarUrl\n    status\n    lastSeen\n    typing\n    currentRoomId\n  }\n}`\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'A GraphQL subscription to track user presence status changes in real-time.'\n      },\n      source: {\n        type: 'code'\n      }\n    }\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n\n    // Get the generated output\n    const subscriptionOutput = canvas.getByTestId('subscription-output');\n    const expectedOutput = canvas.getByTestId('expected-output');\n\n    // Normalize strings (remove whitespace) for comparison\n    const normalizeString = (str: string) => str.replace(/\\s+/g, '');\n    expect(normalizeString(subscriptionOutput.textContent || '')).toBe(normalizeString(expectedOutput.textContent || ''));\n  }\n}",...UserPresenceSubscription.parameters?.docs?.source}}},UsersPresenceSubscription.parameters={...UsersPresenceSubscription.parameters,docs:{...UsersPresenceSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: z.array(userPresenceSchema),\n    options: {\n      variables: {\n        roomId: 'room123'\n      }\n    },\n    expectedOutput: `subscription($roomId: String!) {\n  userPresences(roomId: $roomId) {\n    id\n    name\n    avatarUrl\n    status\n    lastSeen\n    typing\n    currentRoomId\n  }\n}`\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'A subscription using array schema for automatic pluralization of the field name.'\n      },\n      source: {\n        type: 'code'\n      }\n    }\n  }\n}",...UsersPresenceSubscription.parameters?.docs?.source}}},SubscribeUsersPresence.parameters={...SubscribeUsersPresence.parameters,docs:{...SubscribeUsersPresence.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: z.array(userPresenceSchema),\n    options: {\n      operationName: 'SubscribeRoomUsers',\n      variables: {\n        roomId: 'room123'\n      }\n    },\n    expectedOutput: `subscription SubscribeRoomUsers($roomId: String!) {\n  userPresences(roomId: $roomId) {\n    id\n    name\n    avatarUrl\n    status\n    lastSeen\n    typing\n    currentRoomId\n  }\n}`\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'An array subscription with explicit operation name and automatic field name pluralization.'\n      },\n      source: {\n        type: 'code'\n      }\n    }\n  }\n}",...SubscribeUsersPresence.parameters?.docs?.source}}},UserNotificationsSubscription.parameters={...UserNotificationsSubscription.parameters,docs:{...UserNotificationsSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: notificationSchema,\n    options: {\n      operationName: 'SubscribeUserNotifications',\n      variables: {\n        userId: 'user123'\n      }\n    },\n    expectedOutput: `subscription SubscribeUserNotifications($userId: String!) {\n  notification(userId: $userId) {\n    id\n    type\n    title\n    message\n    timestamp\n    read\n    userId\n  }\n}`\n  }\n}",...UserNotificationsSubscription.parameters?.docs?.source}}},NotificationsSubscription.parameters={...NotificationsSubscription.parameters,docs:{...NotificationsSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: z.array(notificationSchema),\n    options: {\n      variables: {\n        userId: 'user123'\n      }\n    },\n    expectedOutput: `subscription($userId: String!) {\n  notifications(userId: $userId) {\n    id\n    type\n    title\n    message\n    timestamp\n    read\n    userId\n  }\n}`\n  }\n}",...NotificationsSubscription.parameters?.docs?.source}}},ChatRoomMessagesSubscription.parameters={...ChatRoomMessagesSubscription.parameters,docs:{...ChatRoomMessagesSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: chatMessageSchema,\n    options: {\n      operationName: 'SubscribeChatRoom',\n      variables: {\n        roomId: 'room123'\n      }\n    },\n    expectedOutput: `subscription SubscribeChatRoom($roomId: String!) {\n  chatMessage(roomId: $roomId) {\n    id\n    content\n    author {\n      id\n      name\n      avatarUrl\n    }\n    timestamp\n    roomId\n    edited\n    reactions\n    attachments {\n      id\n      url\n      fileName\n      fileType\n      fileSize\n      thumbnailUrl\n    }\n    mentions\n  }\n}`\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'A GraphQL subscription for real-time chat messages with nested author details and message attachments.'\n      },\n      source: {\n        type: 'code'\n      }\n    }\n  }\n}",...ChatRoomMessagesSubscription.parameters?.docs?.source}}},ChatMessagesSubscription.parameters={...ChatMessagesSubscription.parameters,docs:{...ChatMessagesSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: z.array(chatMessageSchema),\n    options: {\n      variables: {\n        roomId: 'room123'\n      }\n    },\n    expectedOutput: `subscription($roomId: String!) {\n  chatMessages(roomId: $roomId) {\n    id\n    content\n    author {\n      id\n      name\n      avatarUrl\n    }\n    timestamp\n    roomId\n    edited\n    reactions\n    attachments {\n      id\n      url\n      fileName\n      fileType\n      fileSize\n      thumbnailUrl\n    }\n    mentions\n  }\n}`\n  }\n}",...ChatMessagesSubscription.parameters?.docs?.source}}},ActivityEventsSubscription.parameters={...ActivityEventsSubscription.parameters,docs:{...ActivityEventsSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: activityEventSchema,\n    options: {\n      operationName: 'SubscribeActivityEvents',\n      variables: {\n        userId: 'user123',\n        sessionId: 'session456'\n      }\n    },\n    expectedOutput: `subscription SubscribeActivityEvents($userId: String!, $sessionId: String!) {\n  activityEvent(userId: $userId, sessionId: $sessionId) {\n    id\n    userId\n    eventType\n    resourceId\n    resourceType\n    timestamp\n    metadata\n    ipAddress\n    userAgent\n    sessionId\n  }\n}`\n  }\n}",...ActivityEventsSubscription.parameters?.docs?.source}}},StockTickerSubscription.parameters={...StockTickerSubscription.parameters,docs:{...StockTickerSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: stockTickerSchema,\n    options: {\n      operationName: 'SubscribeStockTicker',\n      variables: {\n        symbols: ['AAPL', 'MSFT', 'GOOGL']\n      }\n    },\n    expectedOutput: `subscription SubscribeStockTicker($symbols: StringInput!) {\n  stockTicker(symbols: $symbols) {\n    symbol\n    price\n    change\n    changePercent\n    volume\n    timestamp\n    open\n    high\n    low\n    previousClose\n  }\n}`\n  }\n}",...StockTickerSubscription.parameters?.docs?.source}}},StockTickersSubscription.parameters={...StockTickersSubscription.parameters,docs:{...StockTickersSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: z.array(stockTickerSchema),\n    options: {\n      variables: {\n        symbols: ['AAPL', 'MSFT', 'GOOGL']\n      }\n    },\n    expectedOutput: `subscription($symbols: StringInput!) {\n  stockTickers(symbols: $symbols) {\n    symbol\n    price\n    change\n    changePercent\n    volume\n    timestamp\n    open\n    high\n    low\n    previousClose\n  }\n}`\n  }\n}",...StockTickersSubscription.parameters?.docs?.source}}},SensorDataSubscription.parameters={...SensorDataSubscription.parameters,docs:{...SensorDataSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: sensorDataSchema,\n    options: {\n      operationName: 'SubscribeSensorData',\n      variables: {\n        deviceId: 'device123',\n        sensorTypes: ['temperature', 'humidity']\n      }\n    },\n    expectedOutput: `subscription SubscribeSensorData($deviceId: String!, $sensorTypes: SensorTypesInput!) {\n  sensorData(deviceId: $deviceId, sensorTypes: $sensorTypes) {\n    sensorId\n    deviceId\n    type\n    value\n    unit\n    timestamp\n    batteryLevel\n    status\n    location {\n      latitude\n      longitude\n      altitude\n    }\n  }\n}`\n  }\n}",...SensorDataSubscription.parameters?.docs?.source}}},CommentEventsSubscription.parameters={...CommentEventsSubscription.parameters,docs:{...CommentEventsSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: commentEventSchema,\n    options: {\n      operationName: 'SubscribeCommentEvents',\n      variables: {\n        postId: 'post123'\n      }\n    }\n  }\n}",...CommentEventsSubscription.parameters?.docs?.source}}},InferredSubscriptionOperation.parameters={...InferredSubscriptionOperation.parameters,docs:{...InferredSubscriptionOperation.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: userPresenceSchema,\n    options: {\n      variables: {\n        userId: 'user123'\n      }\n    },\n    expectedOutput: `subscription($userId: String!) {\n  userPresence(userId: $userId) {\n    id\n    name\n    avatarUrl\n    status\n    lastSeen\n    typing\n    currentRoomId\n  }\n}`\n  }\n}",...InferredSubscriptionOperation.parameters?.docs?.source}}},LimitedDepthSubscription.parameters={...LimitedDepthSubscription.parameters,docs:{...LimitedDepthSubscription.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: commentEventSchema,\n    options: {\n      operationName: 'SubscribeCommentEvents',\n      variables: {\n        postId: 'post123'\n      },\n      maxDepth: 3\n    },\n    expectedOutput: `subscription SubscribeCommentEvents($postId: String!) {\n  commentEvent(postId: $postId) {\n    id\n    postId\n    eventType\n    timestamp\n    actor {\n      id\n      name\n      avatarUrl\n      status\n      lastSeen\n      typing\n      currentRoomId\n    }\n    comment {\n      id\n      content\n      parentId\n      author {\n        id\n        name\n        avatarUrl\n      }\n      createdAt\n      updatedAt\n      reactions\n      attachments\n      mentions\n    }\n    reaction {\n      userId\n      reactionType\n      timestamp\n    }\n  }\n}`\n  }\n}",...LimitedDepthSubscription.parameters?.docs?.source}}},MultipleSubscriptions.parameters={...MultipleSubscriptions.parameters,docs:{...MultipleSubscriptions.parameters?.docs,source:{originalSource:"{\n  args: {\n    schema: z.object({\n      userPresence: userPresenceSchema,\n      notifications: notificationSchema,\n      chatMessages: chatMessageSchema\n    }).describe('CombinedSubscription'),\n    options: {\n      operationName: 'MultiSubscription',\n      variables: {\n        userId: 'user123',\n        roomId: 'room456'\n      }\n    },\n    expectedOutput: `subscription MultiSubscription($userId: String!, $roomId: String!) {\n  combinedSubscription(userId: $userId, roomId: $roomId) {\n    userPresence {\n      id\n      name\n      avatarUrl\n      status\n      lastSeen\n      typing\n      currentRoomId\n    }\n    notifications {\n      id\n      type\n      title\n      message\n      timestamp\n      read\n      userId\n    }\n    chatMessages {\n      id\n      content\n      author {\n        id\n        name\n        avatarUrl\n      }\n      timestamp\n      roomId\n      edited\n      reactions\n      attachments {\n        id\n        url\n        fileName\n        fileType\n        fileSize\n        thumbnailUrl\n      }\n      mentions\n    }\n  }\n}`\n  }\n}",...MultipleSubscriptions.parameters?.docs?.source}}}},"./src/subscription.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>createSubscription,d:()=>processSubscription});var _index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/index.ts");function processSubscription(schema,options={}){const{operationName,variables,maxDepth=10}=options,operation=operationName?` ${operationName}`:"",varsString=(0,_index__WEBPACK_IMPORTED_MODULE_0__.Hh)(variables,options.inputTypeMap),fieldArgs=(0,_index__WEBPACK_IMPORTED_MODULE_0__.ON)(variables),subscriptionField=(0,_index__WEBPACK_IMPORTED_MODULE_0__.Jf)(schema,operationName);return`${_index__WEBPACK_IMPORTED_MODULE_0__.Nt.Subscription}${operation}${varsString} {\n  ${subscriptionField}${fieldArgs} {\n${(0,_index__WEBPACK_IMPORTED_MODULE_0__.fO)(schema,_index__WEBPACK_IMPORTED_MODULE_0__.Nt.Subscription,options,2)}  }\n}`}function createSubscription(schema,options={}){return schema.toGQL(_index__WEBPACK_IMPORTED_MODULE_0__.Nt.Subscription,options)}}}]);